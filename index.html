<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ü‡∏±‡∏á‡∏ò‡∏£‡∏£‡∏° ‚Äì dhamma-radio</title>
  <meta name="description" content="‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ü‡∏±‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏£‡∏ß‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏∞‡πÅ‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ü‡∏±‡∏á‡πÑ‡∏î‡πâ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏†‡∏≤‡∏ß‡∏ô‡∏≤ ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏™‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏™‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏û‡∏£‡∏∞‡∏û‡∏∏‡∏ó‡∏ò‡πÄ‡∏à‡πâ‡∏≤">
  <meta name="keywords" content="‡∏ò‡∏£‡∏£‡∏°‡∏∞, ‡∏ü‡∏±‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏∞, dhamma radio, ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏∞, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏∞, dhammasutta">
  <meta name="author" content="Dhamma-Sutta.com">
  <style>
    body {
      font-family: "TH Sarabun New", "Sarabun", Tahoma, sans-serif;
      background: #fffaf0;
      color: #5a3e1b;
      padding: 20px;
      line-height: 1.6;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fffef7;
      padding: 25px;
      border: 1px solid #d2b48c;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    h1, h2 {
      text-align: center;
      color: #8B0000;
    }
    .playlist-select, .search-input {
      font-size: 18px;
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #c9a77d;
      margin-bottom: 15px;
    }
    .track-list {
      list-style: none;
      padding: 0;
      margin-top: 20px;
    }
    .track-item {
      margin: 8px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .track-button {
      flex: 1;
      padding: 10px;
      background: #fdf6e3;
      border: 1px solid #d5b48c;
      border-radius: 8px;
      text-align: left;
      font-size: 18px;
      color: #5a3e1b;
      cursor: pointer;
      margin-right: 10px;
    }
    .track-button:hover {
      background: #f7eacc;
    }
    .share-button {
      font-size: 16px;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
    }
    audio {
      width: 100%;
      margin-top: 25px;
    }
    .footer-link {
      text-align: center;
      font-size: 14px;
      color: #999;
      margin-top: 40px;
    }
    .footer-link a {
      color: #999;
      text-decoration: none;
    }
    .footer-link a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìª ‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ü‡∏±‡∏á‡∏ò‡∏£‡∏£‡∏° ‚Äì dhamma-radio</h1>

    <input type="text" id="searchInput" class="search-input" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ô..." />

    <select id="playlistSelect" class="playlist-select">
      <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î‡∏ò‡∏£‡∏£‡∏°‡∏∞...</option>
    </select>

    <ul id="trackList" class="track-list"></ul>

    <audio id="audioPlayer" controls>
      <source src="" type="audio/mpeg" />
      ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á
    </audio>

    <div class="footer-link">
      <a href="https://www.dhamma-sutta.com" target="_blank">‡∏ò‡∏£‡∏£‡∏°‡∏™‡∏∏‡∏ï‡∏ï‡∏∞ Dhamma-Sutta.com</a>
    </div>
  </div>

  <script>
    let playlists;
    let currentTracks = [];

    const audio = document.getElementById("audioPlayer");
    const trackList = document.getElementById("trackList");
    const playlistSelect = document.getElementById("playlistSelect");
    const searchInput = document.getElementById("searchInput");

    // ‡πÇ‡∏´‡∏•‡∏î playlist
    fetch("playlists.json")
      .then(response => response.json())
      .then(data => {
        playlists = data;
        Object.keys(playlists).forEach(name => {
          const option = document.createElement("option");
          option.value = name;
          option.textContent = name;
          playlistSelect.appendChild(option);
        });

        // ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        const lastTrack = localStorage.getItem("lastTrackUrl");
        if (lastTrack) {
          audio.src = lastTrack;
        }
      });

    playlistSelect.addEventListener("change", function () {
      const selected = this.value;
      trackList.innerHTML = "";
      currentTracks = playlists[selected] || [];
      showFilteredTracks(searchInput.value);
    });

    searchInput.addEventListener("input", () => {
      showFilteredTracks(searchInput.value);
    });

    function showFilteredTracks(keyword) {
      trackList.innerHTML = "";
      const filtered = currentTracks.filter(track =>
        track.title.toLowerCase().includes(keyword.toLowerCase())
      );
      filtered.forEach(track => {
        const li = document.createElement("li");
        li.className = "track-item";

        const btn = document.createElement("button");
        btn.className = "track-button";
        btn.textContent = `‚ñ∂Ô∏è ${track.title}`;
        btn.onclick = () => {
          audio.src = track.url;
          audio.play();
          localStorage.setItem("lastTrackUrl", track.url);
        };

        const shareBtn = document.createElement("button");
        shareBtn.className = "share-button";
        shareBtn.textContent = "üîó ‡πÅ‡∏ä‡∏£‡πå";
        shareBtn.onclick = () => {
          const url = track.url;
          navigator.clipboard.writeText(url);
          alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß: " + url);
        };

        li.appendChild(btn);
        li.appendChild(shareBtn);
        trackList.appendChild(li);
      });
    }
  </script>
</body>
</html>
