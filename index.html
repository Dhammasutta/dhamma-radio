<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏∞‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏û‡∏£‡∏∞‡πÑ‡∏ï‡∏£‡∏õ‡∏¥‡∏é‡∏Å</title>
  <meta name="description" content="‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ü‡∏±‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏£‡∏ß‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏∞‡πÅ‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ü‡∏±‡∏á‡πÑ‡∏î‡πâ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏†‡∏≤‡∏ß‡∏ô‡∏≤ ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏™‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏™‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏û‡∏£‡∏∞‡∏û‡∏∏‡∏ó‡∏ò‡πÄ‡∏à‡πâ‡∏≤">
  <meta name="keywords" content="‡∏ò‡∏£‡∏£‡∏°‡∏∞, ‡∏ü‡∏±‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏∞, dhamma radio, ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏∞, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏∞, dhammasutta">
  <meta name="author" content="Dhamma-Sutta.com">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#fffaf0">
  <link rel="icon" href="images/icon.png">
  <style>
    body {
      font-family: "TH Sarabun New", "Sarabun", Tahoma, sans-serif;
      background: #fffaf0;
      color: #5a3e1b;
      padding: 20px;
      line-height: 1.6;
      /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding-bottom ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏á‡πÇ‡∏î‡∏¢ fixed player + history */
      /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Ç‡∏≠‡∏á fixed player ‡πÅ‡∏•‡∏∞ history box ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÅ‡∏™‡∏î‡∏á */
      padding-bottom: 220px; /* <<<<<<< ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏•‡∏á ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° resume ‡∏ñ‡∏π‡∏Å‡πÄ‡∏≠‡∏≤‡∏≠‡∏≠‡∏Å */
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fffef7;
      padding: 25px;
      border: 1px solid #d2b48c;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    h1, h2 {
      text-align: center;
      color: #8B0000;
    }
    .search-input {
      font-size: 18px;
      width: 50%;
      padding: 10px 14px;
      border-radius: 24px;
      border: 1px solid #4285F4;
      background-color: #f0f7ff;
      margin: 0 0 15px;
      display: block;
      color: #333;
    }
    .playlist-select {
      font-size: 18px;
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #c9a77d;
      margin-bottom: 15px;
    }
    .stat-info {
      text-align: center;
      font-size: 14px;
      color: #888;
      margin-bottom: 20px;
    }
    .history-box {
      font-size: 16px;
      color: #444;
      background: #f5f3eb;
      border: 1px dashed #bbb;
      border-radius: 10px;
      padding: 15px;
      margin-top: 10px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å audio player */
    }
    .track-list {
      list-style: none;
      padding: 0;
      margin-top: 20px;
    }
    .track-item {
      margin: 8px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .track-button {
      flex: 1;
      padding: 10px;
      background: #fdf6e3;
      border: 1px solid #d5b48c;
      border-radius: 8px;
      text-align: left;
      font-size: 18px;
      color: #5a3e1b;
      cursor: pointer;
      margin-right: 10px;
    }
    .track-button:hover {
      background: #f7eacc;
    }
    .share-button {
      font-size: 16px;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
    }
    .footer-link {
      text-align: center;
      font-size: 14px;
      color: #999;
      margin-top: 40px;
    }
    .footer-link a {
      color: #999;
      text-decoration: none;
    }
    .footer-link a:hover {
      text-decoration: underline;
    }

    /* --- START: CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Fixed Bottom Player --- */
    .fixed-bottom-player-wrapper {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #fffef7;
      padding: 15px 20px;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-sizing: border-box;
    }

    /* ‡∏õ‡∏∏‡πà‡∏° resume ‡∏ñ‡∏π‡∏Å‡πÄ‡∏≠‡∏≤‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ CSS ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏µ‡∏Å */
    /* .fixed-bottom-player-wrapper .resume-button { ... } */
    /* .fixed-bottom-player-wrapper .resume-button:hover { ... } */

    .fixed-bottom-player-wrapper audio {
      width: 100%;
      max-width: 700px;
      /* ‡πÄ‡∏û‡∏¥‡πà‡∏° margin-bottom ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á audio ‡∏Å‡∏±‡∏ö history box */
      /* margin-bottom: 10px; */
    }

    .fixed-bottom-player-wrapper .history-box {
        max-width: 700px;
        width: 100%;
        box-sizing: border-box;
        margin-bottom: 0;
        margin-top: 10px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° margin-top ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á audio player ‡∏Å‡∏±‡∏ö history box */
    }
    /* --- END: CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Fixed Bottom Player --- */

  </style>
</head>
<body>
  <div class="container">
    <h1></h1> <input type="text" id="searchInput" class="search-input" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ô..." />

    <select id="playlistSelect" class="playlist-select">
      <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î‡∏ò‡∏£‡∏£‡∏°‡∏∞...</option>
    </select>

    <div id="statInfo" class="stat-info">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£...</div>

    <ul id="trackList" class="track-list"></ul>

    <div class="footer-link">
      <a href="https://www.dhamma-sutta.com" target="_blank">‡∏ò‡∏£‡∏£‡∏°‡∏™‡∏∏‡∏ï‡∏ï‡∏∞ Dhamma-Sutta.com</a>
    </div>
  </div>

  <div class="fixed-bottom-player-wrapper">
    <audio id="audioPlayer" controls>
      <source src="" type="audio/mpeg" />
      ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á
    </audio>

    <div id="historyBox" class="history-box" style="display: none;"></div>

  </div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js');
      });
    }

    let playlists;
    let currentTracks = [];

    const audio = document.getElementById("audioPlayer");
    const trackList = document.getElementById("trackList");
    const playlistSelect = document.getElementById("playlistSelect");
    const searchInput = document.getElementById("searchInput");
    const statInfo = document.getElementById("statInfo");
    const historyBox = document.getElementById("historyBox");

    fetch("playlists.json")
      .then(response => response.json())
      .then(data => {
        playlists = data;
        let totalTracks = 0;
        Object.keys(playlists).forEach(name => {
          const option = document.createElement("option");
          option.value = name;
          option.textContent = name;
          playlistSelect.appendChild(option);
          totalTracks += playlists[name].length;
        });

        statInfo.textContent = `üî∏ ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${totalTracks} ‡∏ï‡∏≠‡∏ô‡πÉ‡∏ô ${Object.keys(playlists).length} ‡∏ä‡∏∏‡∏î üôè`;

        // ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î lastTrackUrl ‡∏°‡∏≤‡πÉ‡∏™‡πà audio.src ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ
        // ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° resume ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏≤‡∏Å history ‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏á
        // const lastTrack = localStorage.getItem("lastTrackUrl");
        // if (lastTrack) {
        //   // audio.src = lastTrack; // ‡πÑ‡∏°‡πà preload
        // }

        showHistory();
      });

    playlistSelect.addEventListener("change", function () {
      const selected = this.value;
      currentTracks = playlists[selected] || [];
      searchInput.value = "";
      showFilteredTracks("");
    });

    searchInput.addEventListener("input", () => {
      showFilteredTracks(searchInput.value);
    });

    function showFilteredTracks(keyword) {
      trackList.innerHTML = "";
      const filtered = (current
